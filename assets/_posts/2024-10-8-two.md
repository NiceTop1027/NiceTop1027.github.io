---
layout: single
title:  "πγ…£DreamHack blue-whale λ¬Έμ  ν’€μ΄"
updated: 2024-10-09
---

# κ°„λ‹¨ν• Docker λ¬Έμ ν’€μ΄

λ“λ¦Όν•µ λ¬Έμ λ¥Ό ν™•μΈν•΄λ³΄λ©΄ ```dreamhackofficial/blue-whale``` λ ν¬μ§€ν† λ¦¬ (TAG:1) μ—μ„ λ„μ»¤ μ΄λ―Έμ§€λ¥Ό λ‹¤μ΄λ°›μ„ 
μ μκ³  λ„μ»¤λ¥Ό ν™μ©ν•΄ λ¶„μ„ν•λΌκ³  ν•λ‹¤.

```https://github.com/wagoodman/dive```μ—μ„ λ‹¤μ΄λ΅λ“κ°€ λ„μ»¤ μ΄λ―Έμ§€λ¥Ό λ‹¤μ΄λ΅λ“ ν•  μ μλ‹¤.

λ‹¤μ΄μ„ λ°›μ€ ν›„ ν„°λ―Έλ„λ΅ λμ•„μ™€,

λ“λ¦Όν•µμ—μ„ μ¤€ λ¬Έμ νμΌ ```Dockerfile```μ„ ν™•μΈν•΄λ³΄μ

```python
FROM ubuntu:22.04@sha256:27cb6e6ccef575a4698b66f5de06c7ecd61589132d5a91d098f7f3f9285415a9

ENV user chall
ENV chall_port 31337

RUN apt-get update
RUN apt-get install -y python3

RUN adduser $user

COPY ./deploy/flag /home/$user/flag

RUN chown -R root:$user /home/$user

WORKDIR /home/chall
RUN touch `python3 -c "print(open('./flag', 'r').read())"`
RUN rm *

WORKDIR /home
USER $user
EXPOSE $chall_port
```

μ„μ μ½”λ“λ¥Ό ν™•μΈν•  μ μλ”λ°.. μ΄μ¤‘μ—μ„ μ¤‘μ”ν•κ±΄
``` RUN touch `python3 -c "print(open('./flag', 'r').read())"` ``` μ΄κ±°λ‹¤.
**Python3**λ΅ **flag** νμΌμ„ μ½κ³ , κ·Έ λ‚΄μ©μ„ νμΌ μ΄λ¦„μΌλ΅ ν•λ” μƒλ΅μ΄ νμΌμ„ μƒμ„±ν• μ½”λ“μ΄λ‹¤.
μ΄λ¬ν• μ½”λ“λ¥Ό ν•΄μ„ν• ν›„..

```docker images```λ¥Ό ν†µν•΄ μ΄λ―Έμ§€μ IDλ¥Ό ν™•μΈν•μ€κ³ ,
μ΄λ―Έμ§€ IDλ¥Ό λ³µμ‚¬ν•΄ dive [κ³ μ id] λ…λ Ήμ–΄λ¥Ό μ…λ ¥ν•΄ diveλ΅ μ ‘μ†ν–λ‹¤.

μ™Όμ½μ„ λ³΄λ©΄ **Layers** μ•„λμ½μ— 
```python  RUN /bin/sh -c touch `python3 -c "print(open('./flag', 'r').read())"` # buildkit ```
λ¥Ό ν™•μΈν•  μ μλ‹¤. 

λ°©ν–¥ν‚¤λ΅ ν„°λ―Έλ„μ„ μ΅°μΆ…ν•λ©° ```python  RUN /bin/sh -c touch `python3 -c "print(open('./flag', 'r').read())"` # buildkit```λ΅ μ΄λ™ν›„
μ¤λ¥Έμ½μ— μλ” ```Current Layer Contents```λ¥Ό ν™•μΈν•΄λ³΄λ©΄ λ‚΄κ°€ μ„ νƒν• λ μ΄μ–΄μ— λ”°λΌ κ²½λ΅λ¥Ό λ³΄μ—¬μ£Όλ”κ±Έλ΅ λ³΄μΈλ‹¤.
κ·Έλ¬λ―€λ΅ μ΄κ±Έ μ΄μ©ν•λ©΄ κ°„νΈν•κ³  κ°„λ‹¨ν•κ² μ°Ύμ„ μ μμ„ κ²ƒμ΄λ‹¤.

λ§μ•½ μ λ€λ΅ μ°Ύμ•λ‹¤λ©΄ 
```python
DH{b06cb27a502a831822f927562258c6f69b5996a9916206cdb8755cc90ebf3b9f}
```
ν™•μΈν•  μ μλ‹¤.
